version: '3'
services:
  stream-producer: &ortelius-app
    build:
      context: ..
      dockerfile: ./docker/Dockerfile
    command: ["stream-producer", "-c", "/config.json"]
    volumes:
      - /tmp:/tmp
      - ./config.json:/config.json
  stream-consumer:
    <<: *ortelius-app
    command: ["stream-consumer", "-c", "/config.json"]
  api:
    <<: *ortelius-app
    command: ["api", "-c", "/config.json"]
